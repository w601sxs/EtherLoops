<html>

    <head>
<script
  src="https://code.jquery.com/jquery-2.2.4.min.js"
  integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44="
  crossorigin="anonymous"></script>
	<!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/css/materialize.min.css">

    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/js/materialize.min.js"></script>
            
	
        <script src="js/loopr_audio.js"></script>
        
        <link rel="stylesheet" type="text/css" href="css/style.css">
        <link href='https://fonts.googleapis.com/css?family=Dosis' rel='stylesheet' type='text/css'>
        <script>
/*================================================================================
 * @name: bPopup - if you can't get it up, use bPopup
 * @author: (c)Bjoern Klinggaard (twitter@bklinggaard)
 * @demo: http://dinbror.dk/bpopup
 * @version: 0.11.0.min
 ================================================================================*/
 (function(c){c.fn.bPopup=function(A,E){function L(){a.contentContainer=c(a.contentContainer||b);switch(a.content){case "iframe":var d=c('<iframe class="b-iframe" '+a.iframeAttr+"></iframe>");d.appendTo(a.contentContainer);t=b.outerHeight(!0);u=b.outerWidth(!0);B();d.attr("src",a.loadUrl);l(a.loadCallback);break;case "image":B();c("<img />").load(function(){l(a.loadCallback);F(c(this))}).attr("src",a.loadUrl).hide().appendTo(a.contentContainer);break;default:B(),c('<div class="b-ajax-wrapper"></div>').load(a.loadUrl,a.loadData,function(d,b,e){l(a.loadCallback,b);F(c(this))}).hide().appendTo(a.contentContainer)}}function B(){a.modal&&c('<div class="b-modal '+e+'"></div>').css({backgroundColor:a.modalColor,position:"fixed",top:0,right:0,bottom:0,left:0,opacity:0,zIndex:a.zIndex+v}).appendTo(a.appendTo).fadeTo(a.speed,a.opacity);C();b.data("bPopup",a).data("id",e).css({left:"slideIn"==a.transition||"slideBack"==a.transition?"slideBack"==a.transition?f.scrollLeft()+w:-1*(x+u):m(!(!a.follow[0]&&n||g)),position:a.positionStyle||"absolute",top:"slideDown"==a.transition||"slideUp"==a.transition?"slideUp"==a.transition?f.scrollTop()+y:z+-1*t:p(!(!a.follow[1]&&q||g)),"z-index":a.zIndex+v+1}).each(function(){a.appending&&c(this).appendTo(a.appendTo)});G(!0)}function r(){a.modal&&c(".b-modal."+b.data("id")).fadeTo(a.speed,0,function(){c(this).remove()});a.scrollBar||c("html").css("overflow","auto");c(".b-modal."+e).unbind("click");f.unbind("keydown."+e);k.unbind("."+e).data("bPopup",0<k.data("bPopup")-1?k.data("bPopup")-1:null);b.undelegate(".bClose, ."+a.closeClass,"click."+e,r).data("bPopup",null);clearTimeout(H);G();return!1}function I(d){y=k.height();w=k.width();h=D();if(h.x||h.y)clearTimeout(J),J=setTimeout(function(){C();d=d||a.followSpeed;var e={};h.x&&(e.left=a.follow[0]?m(!0):"auto");h.y&&(e.top=a.follow[1]?p(!0):"auto");b.dequeue().each(function(){g?c(this).css({left:x,top:z}):c(this).animate(e,d,a.followEasing)})},50)}function F(d){var c=d.width(),e=d.height(),f={};a.contentContainer.css({height:e,width:c});e>=b.height()&&(f.height=b.height());c>=b.width()&&(f.width=b.width());t=b.outerHeight(!0);u=b.outerWidth(!0);C();a.contentContainer.css({height:"auto",width:"auto"});f.left=m(!(!a.follow[0]&&n||g));f.top=p(!(!a.follow[1]&&q||g));b.animate(f,250,function(){d.show();h=D()})}function M(){k.data("bPopup",v);b.delegate(".bClose, ."+a.closeClass,"click."+e,r);a.modalClose&&c(".b-modal."+e).css("cursor","pointer").bind("click",r);N||!a.follow[0]&&!a.follow[1]||k.bind("scroll."+e,function(){if(h.x||h.y){var d={};h.x&&(d.left=a.follow[0]?m(!g):"auto");h.y&&(d.top=a.follow[1]?p(!g):"auto");b.dequeue().animate(d,a.followSpeed,a.followEasing)}}).bind("resize."+e,function(){I()});a.escClose&&f.bind("keydown."+e,function(a){27==a.which&&r()})}function G(d){function c(e){b.css({display:"block",opacity:1}).animate(e,a.speed,a.easing,function(){K(d)})}switch(d?a.transition:a.transitionClose||a.transition){case "slideIn":c({left:d?m(!(!a.follow[0]&&n||g)):f.scrollLeft()-(u||b.outerWidth(!0))-200});break;case "slideBack":c({left:d?m(!(!a.follow[0]&&n||g)):f.scrollLeft()+w+200});break;case "slideDown":c({top:d?p(!(!a.follow[1]&&q||g)):f.scrollTop()-(t||b.outerHeight(!0))-200});break;case "slideUp":c({top:d?p(!(!a.follow[1]&&q||g)):f.scrollTop()+y+200});break;default:b.stop().fadeTo(a.speed,d?1:0,function(){K(d)})}}function K(d){d?(M(),l(E),a.autoClose&&(H=setTimeout(r,a.autoClose))):(b.hide(),l(a.onClose),a.loadUrl&&(a.contentContainer.empty(),b.css({height:"auto",width:"auto"})))}function m(a){return a?x+f.scrollLeft():x}function p(a){return a?z+f.scrollTop():z}function l(a,e){c.isFunction(a)&&a.call(b,e)}function C(){z=q?a.position[1]:Math.max(0,(y-b.outerHeight(!0))/2-a.amsl);x=n?a.position[0]:(w-b.outerWidth(!0))/2;h=D()}function D(){return{x:w>b.outerWidth(!0),y:y>b.outerHeight(!0)}}c.isFunction(A)&&(E=A,A=null);var a=c.extend({},c.fn.bPopup.defaults,A);a.scrollBar||c("html").css("overflow","hidden");var b=this,f=c(document),k=c(window),y=k.height(),w=k.width(),N=/OS 6(_\d)+/i.test(navigator.userAgent),v=0,e,h,q,n,g,z,x,t,u,J,H;b.close=function(){r()};b.reposition=function(a){I(a)};return b.each(function(){c(this).data("bPopup")||(l(a.onOpen),v=(k.data("bPopup")||0)+1,e="__b-popup"+v+"__",q="auto"!==a.position[1],n="auto"!==a.position[0],g="fixed"===a.positionStyle,t=b.outerHeight(!0),u=b.outerWidth(!0),a.loadUrl?L():B())})};c.fn.bPopup.defaults={amsl:50,appending:!0,appendTo:"body",autoClose:!1,closeClass:"b-close",content:"ajax",contentContainer:!1,easing:"swing",escClose:!0,follow:[!0,!0],followEasing:"swing",followSpeed:500,iframeAttr:'scrolling="no" frameborder="0"',loadCallback:!1,loadData:!1,loadUrl:!1,modal:!0,modalClose:!0,modalColor:"#000",onClose:!1,onOpen:!1,opacity:.7,position:["auto","auto"],positionStyle:"absolute",scrollBar:!0,speed:250,transition:"fadeIn",transitionClose:!1,zIndex:9997}})(jQuery);

            randomColor = function () {
                    return "rgba(" + Math.floor(Math.random() * 255) + "," + Math.floor(Math.random() * 255) + "," + Math.floor(Math.random() * 255) + ",1)";
                };
            $(document).ready(function () {
                // $('#wrapper').load('partials/128bpm.html');
                //for each div, let's get the URL and give each div the audio functions
                $('#sp span').each(function () {
                    addAudioProperties(this);
                });
		    
		$menuLeft = $('.pushmenu-left');
		$nav_list = $('#nav_list');
		
		$nav_list.click(function() {
			$(this).toggleClass('active');
			$('.pushmenu-push').toggleClass('pushmenu-push-toright');
			$menuLeft.toggleClass('pushmenu-open');
		});
		
		$('element_to_pop_up').bPopup();
		
            });
		
            
            //clicking one of the bpm options will load the appropriate partial, add the audio properties to each span, and then reset the .js to the new beat
            $(document).on('click','a.new-bpm',function(){
                 var bpm = $(this).attr('bpm');
                 $('#wrapper').load('partials/' + bpm + 'bpm.html', function(){
                    $('#sp span').each(function () {
                        addAudioProperties(this);
                    });
                    changeBPM(bpm);
                 });
		 context.resume().then(() => {
    			console.log('Playback resumed successfully 1');
  		 });
                 return false;
            });
            //on click, check to see if we have a grey box or a colored box
            //play or stop accordingly
            $(document).on('click','#sp span',function(){
		
		 context.resume().then(() => {
    			console.log('Playback resumed successfully 2');
  		 });
		 
                if ($(this).css('background-color') === 'rgba(0, 0, 0, 0)')
                {
                    var cclr = randomColor;
                    $(this).css('background-color', 'rgba(0,0,0,1)');
                    
                    this.addToLoops();
                }else{
                    this.stop();
                    this.removeLoop();
                    $(this).css('background-color','rgba(0, 0, 0, 0)');
                    $(this).css('opacity',1);
                }
            });
            $(window).load(function(){
                $('a.btn2').click(function(){
                   
                    //console.log($(this).attr('class'));
                    if ($(this).attr('class') === 'btn2 active')
                    {
                        $(this).css( "background","rgba(44,62,80,1)");
                        
                    }else{
                        $( this ).css("background",randomColor);
                        
                    }
                    $( this ).toggleClass( "active" );
 
                });

            });
            
	
        </script>
	
        <title>EtherLoops</title>
    </head>

<body class="pushmenu-push">
<!-- MENU STUFF -->
<nav class="pushmenu pushmenu-left">
    <h3>EtherLoops</h3>
    <a href="https://w601sxs.github.io/EtherLoops/#">Home</a>
    <a href="https://w601sxs.github.io/EtherLoops/market.html">Buy plates</a>
    <a href="#">Record Loop</a>
    <a href="#">Publish Loop</a>
    <a href="#">Trade</a>
    <a href="#">Donate</a>
  </nav>
  
<div class="container">
        <div class="main">
        <section class="buttonset">
            <div id="nav_list">Menu</div>
        </section>
      
    <section class="content">
      <p>
    	
      </p>
      
    </section><!-- End Content -->
  </div><!-- End Main -->
</div><!-- End Container --> 
	
	
<!-- AUDIO STUFF -->	
	
<div id='wrapper'>
    <div class='background'>
        <!--
	    <p><a class='new-bpm' href='#' bpm='140'>140</a> | <a class='tempo' href='#' bpm='128'>128</a> | <a class='new-bpm' href='#' bpm='90'>90</a></p>
	-->
        <canvas id="beat-bar"></canvas>
       
        <div class='backgroundlayer'>
            <div id="sp" class="button-group-navigation" target="_blank">
                <div class="bass">
                    <span id="pad1" data-sound="sounds/VEEElectroLoop001.wav"><li><a class="btn2" href="#"></a></li></span>
                    <span id="pad1" data-sound="sounds/VFX2Bass1128BPMcopy.wav"><li><a class="btn2" href="#"></a></li></span>
                    <span id="pad1" data-sound="sounds/VFX2Bass2128BPMcopy.wav"><li><a class="btn2" href="#"></a></li></span>
                    <span id="pad1" data-sound="sounds/VFX2Bass3128BPMcopy.wav"><li><a class="btn2" href="#"></a></li></span>
                </div>
                <div class='loops'>
                    <hr>
                    <span id="pad2" data-sound="sounds/VEH2SpecialSounds-13copy.wav"><li><a class="btn2" href="#"></a></li></span>
                    <span id="pad3" data-sound="sounds/VEH2SpecialSounds-36copy.wav"><li><a class="btn2" href="#"></a></li></span>
                    <span id="pad4" data-sound="sounds/VEH2SpecialSounds-28copy.wav"><li><a class="btn2" href="#"></a></li></span><br>
                    <span id="pad4" data-sound="sounds/VFX2Beat128BPMcopy.wav"><li><a class="btn2" href="#"></a></li></span>
                    <span id="pad4" data-sound="sounds/VFX2Loop006128BPMcopy.wav"><li><a class="btn2" href="#"></a></li></span>
                    <span id="pad4" data-sound="sounds/VFX2Loop006128BPMcopy.wav"><li><a class="btn2" href="#"></a></li></span><br>
                    <span id="pad4" data-sound="sounds/VFX2Loop006128BPMcopy.wav"><li><a class="btn2" href="#"></a></li></span>
                    <span id="pad4" data-sound="sounds/VFX2Loop006128BPMcopy.wav"><li><a class="btn2" href="#"></a></li></span>
                    <span id="pad4" data-sound="sounds/VFX2Loop006128BPMcopy.wav"><li><a class="btn2" href="#"></a></li></span>
                    
                </div>
                <div class='drums'>
                    <hr>
                    <span id="pad5" data-sound="sounds/VEEElectroLoop001.wav"><li><a class="btn2" href="#"></a></li></span>
                    <span id="pad5" data-sound="sounds/VEEElectroLoop007.wav"><li><a class="btn2" href="#"></a></li></span>
                    <span id="pad5" data-sound="sounds/VEEElectroLoop352copy.wav"><li><a class="btn2" href="#"></a></li></span>
                    <span id="pad5" data-sound="sounds/VEEElectroLoop455copy.wav"><li><a class="btn2" href="#"></a></li></span>
                </div>
            </div>
        
        </div>
    </div>
     
</div>
<script src="js/loopr_canvas.js"></script>

	
	
<!-- POPUP MODAL BUTTON BOOTSTRAP -->

<button type="button" id="mymodal" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal">
  Launch demo modal
</button>

<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Modal title</h4>
      </div>
      <div class="modal-body">
        ...
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Save changes</button>
      </div>
    </div>
  </div>
</div>


</body>
</html>
