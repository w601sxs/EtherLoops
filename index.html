<html>

    <head>
<script
  src="https://code.jquery.com/jquery-2.2.4.min.js"
  integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44="
  crossorigin="anonymous"></script>
	<!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/css/materialize.min.css">

    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/js/materialize.min.js"></script>
            
	
        <script src="js/loopr_audio.js"></script>
        
        <link rel="stylesheet" type="text/css" href="css/style.css">
        <link href='https://fonts.googleapis.com/css?family=Dosis' rel='stylesheet' type='text/css'>
        <script>
            
            randomColor = function () {
                    return "rgba(" + Math.floor(Math.random() * 255) + "," + Math.floor(Math.random() * 255) + "," + Math.floor(Math.random() * 255) + ",1)";
                };
            $(document).ready(function () {
                // $('#wrapper').load('partials/128bpm.html');
                //for each div, let's get the URL and give each div the audio functions
                $('#sp span').each(function () {
                    addAudioProperties(this);
                });
		    
		$menuLeft = $('.pushmenu-left');
		$nav_list = $('#nav_list');
		
		$nav_list.click(function() {
			$(this).toggleClass('active');
			$('.pushmenu-push').toggleClass('pushmenu-push-toright');
			$menuLeft.toggleClass('pushmenu-open');
		});
		  
            });
            //clicking one of the bpm options will load the appropriate partial, add the audio properties to each span, and then reset the .js to the new beat
            $(document).on('click','a.new-bpm',function(){
                 var bpm = $(this).attr('bpm');
                 $('#wrapper').load('partials/' + bpm + 'bpm.html', function(){
                    $('#sp span').each(function () {
                        addAudioProperties(this);
                    });
                    changeBPM(bpm);
                 });
		 context.resume().then(() => {
    			console.log('Playback resumed successfully 1');
  		 });
                 return false;
            });
            //on click, check to see if we have a grey box or a colored box
            //play or stop accordingly
            $(document).on('click','#sp span',function(){
		
		 context.resume().then(() => {
    			console.log('Playback resumed successfully 2');
  		 });
		 
                if ($(this).css('background-color') === 'rgba(0, 0, 0, 0)')
                {
                    var cclr = randomColor;
                    $(this).css('background-color', 'rgba(0,0,0,1)');
                    
                    this.addToLoops();
                }else{
                    this.stop();
                    this.removeLoop();
                    $(this).css('background-color','rgba(0, 0, 0, 0)');
                    $(this).css('opacity',1);
                }
            });
            $(window).load(function(){
                $('a.btn2').click(function(){
                   
                    //console.log($(this).attr('class'));
                    if ($(this).attr('class') === 'btn2 active')
                    {
                        $(this).css( "background","rgba(44,62,80,1)");
                        
                    }else{
                        $( this ).css("background",randomColor);
                        
                    }
                    $( this ).toggleClass( "active" );
 
                });
		    
		$(function () {
			$('.modal').modal();
  			$('select').material_select();
			});
            });
            
	

    $('#btn-modal').click(function() {
    	$('.modal').modal();
    	$('select').material_select();
	console.log("clicked modal");
	    
    });



		
        </script>
	
        <title>EtherLoops</title>
    </head>

<body class="pushmenu-push">
<!-- MENU STUFF -->
<nav class="pushmenu pushmenu-left">
    <h3>EtherLoops</h3>
    <a href="https://w601sxs.github.io/EtherLoops/#">Home</a>
    <a href="https://w601sxs.github.io/EtherLoops/market.html">Buy plates</a>
    <a href="#">Record Loop</a>
    <a href="#">Publish Loop</a>
    <a href="#">Trade</a>
    <a href="#">Donate</a>
  </nav>
  
<div class="container">
        <div class="main">
        <section class="buttonset">
            <div id="nav_list">Menu</div>
        </section>
      
    <section class="content">
      <p>
    	
      </p>
      
    </section><!-- End Content -->
  </div><!-- End Main -->
</div><!-- End Container --> 
	
	
<!-- AUDIO STUFF -->	
	
<div id='wrapper'>
    <div class='background'>
        <!--
	    <p><a class='new-bpm' href='#' bpm='140'>140</a> | <a class='tempo' href='#' bpm='128'>128</a> | <a class='new-bpm' href='#' bpm='90'>90</a></p>
	-->
        <canvas id="beat-bar"></canvas>
       
        <div class='backgroundlayer'>
            <div id="sp" class="button-group-navigation" target="_blank">
                <div class="bass">
                    <span id="pad1" data-sound="sounds/VEEElectroLoop001.wav"><li><a class="btn2" href="#"></a></li></span>
                    <span id="pad1" data-sound="sounds/VFX2Bass1128BPMcopy.wav"><li><a class="btn2" href="#"></a></li></span>
                    <span id="pad1" data-sound="sounds/VFX2Bass2128BPMcopy.wav"><li><a class="btn2" href="#"></a></li></span>
                    <span id="pad1" data-sound="sounds/VFX2Bass3128BPMcopy.wav"><li><a class="btn2" href="#"></a></li></span>
                </div>
                <div class='loops'>
                    <hr>
                    <span id="pad2" data-sound="sounds/VEH2SpecialSounds-13copy.wav"><li><a class="btn2" href="#"></a></li></span>
                    <span id="pad3" data-sound="sounds/VEH2SpecialSounds-36copy.wav"><li><a class="btn2" href="#"></a></li></span>
                    <span id="pad4" data-sound="sounds/VEH2SpecialSounds-28copy.wav"><li><a class="btn2" href="#"></a></li></span><br>
                    <span id="pad4" data-sound="sounds/VFX2Beat128BPMcopy.wav"><li><a class="btn2" href="#"></a></li></span>
                    <span id="pad4" data-sound="sounds/VFX2Loop006128BPMcopy.wav"><li><a class="btn2" href="#"></a></li></span>
                    <span id="pad4" data-sound="sounds/VFX2Loop006128BPMcopy.wav"><li><a class="btn2" href="#"></a></li></span><br>
                    <span id="pad4" data-sound="sounds/VFX2Loop006128BPMcopy.wav"><li><a class="btn2" href="#"></a></li></span>
                    <span id="pad4" data-sound="sounds/VFX2Loop006128BPMcopy.wav"><li><a class="btn2" href="#"></a></li></span>
                    <span id="pad4" data-sound="sounds/VFX2Loop006128BPMcopy.wav"><li><a class="btn2" href="#"></a></li></span>
                    
                </div>
                <div class='drums'>
                    <hr>
                    <span id="pad5" data-sound="sounds/VEEElectroLoop001.wav"><li><a class="btn2" href="#"></a></li></span>
                    <span id="pad5" data-sound="sounds/VEEElectroLoop007.wav"><li><a class="btn2" href="#"></a></li></span>
                    <span id="pad5" data-sound="sounds/VEEElectroLoop352copy.wav"><li><a class="btn2" href="#"></a></li></span>
                    <span id="pad5" data-sound="sounds/VEEElectroLoop455copy.wav"><li><a class="btn2" href="#"></a></li></span>
                </div>
            </div>
        
        </div>
    </div>
     
</div>
<script src="js/loopr_canvas.js"></script>

	
	
<!-- POPUP MODAL BUTTON BOOTSTRAP -->


<div class='modal modal-fixed-footer'>
  <div class='modal-content'>
    <br>
    <select>
      <option>Select towards the top</option>
      <option>Option</option>
      <option>Option</option>
      <option>Option</option>
      <option>Option</option>
      <option>Option</option>
      <option>Option</option>
      <option>Option</option>
      <option>Option</option>
      <option>Option</option>
    </select>
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc ac sem feugiat, rutrum neque a, mollis nulla. Aliquam in arcu ut lacus facilisis accumsan at sit amet tortor. Curabitur luctus auctor felis, nec feugiat lectus auctor nec. Morbi eu augue id eros lacinia laoreet et at felis. Integer at auctor ante. Integer facilisis placerat sapien, a vulputate quam euismod et. Mauris pretium erat tellus, finibus tincidunt ipsum rutrum in. Quisque laoreet ut dolor non dapibus.</p>
    <p>Nullam blandit ultricies mauris, id semper ligula bibendum ut. Aliquam eu ipsum ex. Cras fermentum, elit ut molestie placerat, mi magna fringilla elit, sed lobortis lectus velit sit amet nisl. Aenean feugiat, sapien et eleifend consectetur, lorem nisl porta mi, a efficitur dolor risus ac ligula. Suspendisse fermentum magna odio, in dapibus massa lobortis quis. Ut at porta metus. Phasellus et enim nec elit commodo rutrum maximus eu ante. Vivamus magna risus, interdum sit amet mauris sit amet, dapibus imperdiet quam. Suspendisse iaculis vel tellus ac egestas. Vivamus aliquet, tortor nec dignissim porttitor, sapien felis efficitur ipsum, ut rutrum magna nisl sed felis. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Maecenas egestas diam eros, in vestibulum enim rutrum in. Nam vel accumsan metus. Duis imperdiet id diam vel feugiat. Aliquam orci mi, interdum eu ultrices sollicitudin, tristique nec neque. Nunc ultrices massa nec ex molestie commodo.</p>
    <select>
      <option>Select towards the bottom</option>
      <option>Option</option>
      <option>Option</option>
      <option>Option</option>
      <option>Option</option>
      <option>Option</option>
      <option>Option</option>
      <option>Option</option>
      <option>Option</option>
      <option>Option</option>
    </select>
  </div>
  <div class='modal-footer'>
    <button class='btn'>
      Footer Btn
    </button>
  </div>
</div>
	
<button id="btn-modal" class="btn">OPEN MODAL 4</button>


</body>
</html>
