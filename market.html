<html>

    <head>
<script
  src="https://code.jquery.com/jquery-2.2.4.min.js"
  integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44="
  crossorigin="anonymous"></script>
	<!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/css/materialize.min.css">

    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/js/materialize.min.js"></script>
            
	
        <script src="js/loopr_audio.js"></script>
        
        <link rel="stylesheet" type="text/css" href="css/style.css">
        <link href='https://fonts.googleapis.com/css?family=Dosis' rel='stylesheet' type='text/css'>
        <script>
            
            randomColor = function () {
                    return "rgba(" + Math.floor(Math.random() * 255) + "," + Math.floor(Math.random() * 255) + "," + Math.floor(Math.random() * 255) + ",1)";
                };
            $(document).ready(function () {
                // $('#wrapper').load('partials/128bpm.html');
                //for each div, let's get the URL and give each div the audio functions
                $('#sp span').each(function () {
                    addAudioProperties(this);
                });
		    
		$menuLeft = $('.pushmenu-left');
		$nav_list = $('#nav_list');
		
		$nav_list.click(function() {
			$(this).toggleClass('active');
			$('.pushmenu-push').toggleClass('pushmenu-push-toright');
			$menuLeft.toggleClass('pushmenu-open');
		});
		  
            });
		
	    $(document).bind("contextmenu",function(e){
  e.preventDefault();
  console.log(e.pageX + "," + e.pageY);
  $("#cntnr").css("left",e.pageX);
  $("#cntnr").css("top",e.pageY);
 // $("#cntnr").hide(100);        
  $("#cntnr").fadeIn(200,startFocusOut());      
});

function startFocusOut(){
  $(document).on("click",function(){
  $("#cntnr").hide();        
  $(document).off("click");
  });
}

$("#items > li").click(function(){
$("#op").text("You have selected "+$(this).text());
});
		
            //clicking one of the bpm options will load the appropriate partial, add the audio properties to each span, and then reset the .js to the new beat
            $(document).on('click','a.new-bpm',function(){
                 var bpm = $(this).attr('bpm');
                 $('#wrapper').load('partials/' + bpm + 'bpm.html', function(){
                    $('#sp span').each(function () {
                        addAudioProperties(this);
                    });
                    changeBPM(bpm);
                 });
		 context.resume().then(() => {
    			console.log('Playback resumed successfully 1');
  		 });
                 return false;
            });
            //on click, check to see if we have a grey box or a colored box
            //play or stop accordingly
            $(document).on('click','#sp span',function(){
		
		 context.resume().then(() => {
    			console.log('Playback resumed successfully 2');
  		 });
		 
                if ($(this).css('background-color') === 'rgba(0, 0, 0, 0)')
                {
                    var cclr = randomColor;
                    $(this).css('background-color', 'rgba(0,0,0,1)');
                    
                    this.addToLoops();
                }else{
                    this.stop();
                    this.removeLoop();
                    $(this).css('background-color','rgba(0, 0, 0, 0)');
                    $(this).css('opacity',1);
                }
            });
            $(window).load(function(){
                $('a.btn').click(function(){
                   
                    //console.log($(this).attr('class'));
                    if ($(this).attr('class') === 'btn active')
                    {
                        $(this).css( "background","rgba(44,62,80,1)");
                        
                    }else{
                        $( this ).css("background",randomColor);
                        
                    }
                    $( this ).toggleClass( "active" );
 
                });
            });
            
	
        </script>
	
        <title>EtherLoops</title>
    </head>

<body class="pushmenu-push">
<!-- MENU STUFF -->
<nav class="pushmenu pushmenu-left">
    <h3>EtherLoops</h3>
    <a href="https://w601sxs.github.io/EtherLoops/#">Home</a>
    <a href="https://w601sxs.github.io/EtherLoops/market.html">Buy Cards</a>
    <a href="#">Buy Loops</a>
    <a href="#" onclick="recordloop()">Record Loop</a>
    <a href="#" onclick="modalpopup()">Publish Loop</a>
    <a href="#">Trade</a>
    <a href="https://w601sxs.github.io/EtherLoops/payment.html">Donate</a>
  </nav>
  
<div class="container">
        <div class="main">
        <section class="buttonset">
            <div id="nav_list">Menu</div>
        </section>
      
    <section class="content">
      <p>
    	
      </p>
      
    </section><!-- End Content -->
  </div><!-- End Main -->
</div><!-- End Container --> 
	
	
<!-- AUDIO STUFF -->	
    	<p align="center">
	<iframe src="https://mycloudplayers.com/playlist/?theme=l&autoplay=0&d=1&shuffle=0&t=Recent%20EtherLoops&i=343504462,206367451,311121069,312710325,134007196,152891120,83922736,131774970,24726507,98454073,244327647,132304406,67645825,245112993,148270341,35885101,125468809,122894086,339302240,88213922,141235472,141208220,141188054,39353407,342153105,97749493,19885904,19885903,100310575,348060009,348059028,95710624,328758924,211257134,303212889,192696927,192696813,192696909,192696842,192696875,376629704,82771469,322225312,82771295,82771674,82771333,82771549,82771524,82771585,82771487,82771432" width="80%" height="100%" frameborder="0" align="middle"></iframe>
	</p>
<span id="op"> </span>
  <div id='cntnr'>
    <ul id='items'>
      <li>Upvote</li>
      <li>Downvote</li>  
    </ul>
    <hr />
    <ul id="items">
      <li>Buy Selection</li>
    </ul>
    <hr />
    <ul id='items'>
      <li>Invest</li>
      <li>Share</li>  
    </ul>
  </div>
</body>
</html>
